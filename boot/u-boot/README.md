# U-Boot для Orange Pi PC

## Описание

Это руководство объясняет процесс сборки, настройки и прошивки U-Boot для платформы Orange Pi PC с процессором Allwinner H3. U-Boot является загрузчиком, который инициализирует оборудование и загружает операционную систему на устройстве. Этот проект включает конфигурации для SD карты, загрузки ядра и настройки сетевых интерфейсов.

## Требования

- Устройство Orange Pi PC с процессором Allwinner H3.
- Установленная утилита `make` для сборки U-Boot.
- Компилятор для ARM, например, `gcc-arm-linux-gnueabihf` для Linux.
- Карта памяти SD или флешка для загрузки U-Boot.

## Сборка U-Boot

1. **Клонируйте репозиторий с исходным кодом U-Boot**:
    ```bash
    git clone https://github.com/u-boot/u-boot.git
    cd u-boot
    ```

2. **Настройте конфигурацию для Orange Pi PC**:
    Убедитесь, что вы выбрали правильную конфигурацию для вашего устройства. Для Orange Pi PC используйте `sunxi_defconfig`:
    ```bash
    make sunxi_defconfig
    ```

3. **Сборка U-Boot**:
    После настройки конфигурации, скомпилируйте U-Boot для вашей платформы:
    ```bash
    make
    ```

4. **Запись U-Boot на SD карту**:
    После успешной сборки запишите бинарный файл загрузчика `u-boot.bin` на SD карту. Например, если ваша SD карта доступна как `/dev/sdX`, используйте команду:
    ```bash
    sudo dd if=u-boot.bin of=/dev/sdX bs=1024 seek=8
    ```

    Убедитесь, что указали правильный путь к устройству, чтобы избежать потери данных.

## Настройка загрузки

U-Boot можно настроить для загрузки ядра и файловой системы с различных устройств. Пример конфигурации для загрузки с SD карты:

1. **Создайте файл окружения (`u-boot.env`)**:
    В файле `u-boot.env` укажите параметры загрузки:
    ```bash
    bootargs=console=ttyS0,115200 root=/dev/mmcblk0p2 rootwait
    bootcmd=mmc dev 0; mmc read 0x40008000 0x800 0x1000; bootm 0x40008000
    ```

2. **Сохранение переменных окружения**:
    Запишите переменные окружения на SD карту:
    ```bash
    saveenv
    ```

## Загрузка через TFTP

Если вы хотите настроить загрузку через сеть с использованием TFTP, добавьте следующие параметры в `u-boot.env`:

```bash
bootcmd_tftp=dhcp; tftpboot 0x40008000 zImage; bootm 0x40008000
bootargs_tftp=console=ttyS0,115200 root=/dev/nfs nfsroot=192.168.1.100:/nfsroot rw ip=dhcp
